# Подтверждение привязки

## OpenAPI Specification

```yaml
openapi: 3.0.1
info:
  title: ''
  description: ''
  version: 1.0.0
paths:
  /payment/card/{card_token}:
    put:
      summary: Подтверждение привязки
      deprecated: false
      description: ''
      tags:
        - Привязка карт (API)
      parameters:
        - name: card_token
          in: path
          description: Идентификатор добавляемой карты в систему
          required: true
          example: 6225f3c93f7a880142782fa4
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                otp:
                  type: string
                  description: Одноразовый пароль для подтверждения операции
              required:
                - otp
              x-apidog-orders:
                - otp
              x-apidog-ignore-properties: []
            example:
              otp: '112233'
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      id:
                        type: integer
                      application_id:
                        type: integer
                        description: >-
                          Идентификатор приложения, выданный со стороны
                          Multicard
                      payer_id:
                        type: string
                        description: >-
                          Значение поля session_id из ответа на запрос привязки
                          карты
                      card_pan:
                        type: string
                        description: |-
                          Max length:16
                          Маскированный номер карты
                      card_token:
                        type: string
                        description: |-
                          Max length:255
                          Токен карты для проведения платежных операций с картой
                      phone:
                        type: string
                        description: >-
                          Телефон плательщика в формате 998XXXXXXXXX (при
                          наличии)
                      holder_name:
                        type: string
                        description: Имя и фамилия владельца карты
                      pinfl:
                        type: 'null'
                        description: >-
                          ПИНФЛ держателя карты (возвращается в случае передачи
                          в запросе на создание привязки для карт Uzcard и Humo)

                          Max length:14
                      ps:
                        type: string
                        description: |-
                          Allowed values (5)
                          uzcard,
                          humo,
                          visa,
                          mastercard,
                          unionpay
                          hide all
                          Платежная система
                      status:
                        $ref: '#/components/schemas/PaymentStatusEnum'
                      added_on:
                        type: string
                        description: Время добавления карты в формате YYYY-mm-dd H:i:s
                      card_status:
                        type: object
                        properties:
                          code:
                            type: integer
                          description:
                            type: string
                        required:
                          - code
                          - description
                        x-apidog-orders:
                          - code
                          - description
                        x-apidog-ignore-properties: []
                      sms_inform:
                        type: boolean
                    required:
                      - id
                      - application_id
                      - payer_id
                      - card_pan
                      - card_token
                      - phone
                      - holder_name
                      - pinfl
                      - ps
                      - status
                      - added_on
                      - card_status
                      - sms_inform
                    x-apidog-orders:
                      - id
                      - application_id
                      - payer_id
                      - card_pan
                      - card_token
                      - phone
                      - holder_name
                      - pinfl
                      - ps
                      - status
                      - added_on
                      - card_status
                      - sms_inform
                    x-apidog-ignore-properties: []
                required:
                  - success
                  - data
                x-apidog-orders:
                  - success
                  - data
                x-apidog-ignore-properties: []
          headers: {}
          x-apidog-name: Привязка карты
        '400':
          description: >-
            При вводе некорректного код пароля, система возвращает ошибку с
            кодом 400, и сообщает клиенту об ошибке
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    description: Статус запроса
                  error:
                    type: object
                    properties:
                      code:
                        type: string
                        description: Кодовое сообщение
                      details:
                        type: string
                        description: Описание ошибки
                    required:
                      - code
                      - details
                    x-apidog-orders:
                      - code
                      - details
                    description: Ошибка
                    x-apidog-ignore-properties: []
                required:
                  - success
                  - error
                x-apidog-orders:
                  - success
                  - error
                x-apidog-ignore-properties: []
          headers: {}
          x-apidog-name: Отправка неправильного OTP
        '423':
          description: >-
            При вводе истёкшого код пароля, система возвращает ошибку с кодом
            400, и сообщает клиенту об ошибке
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    description: Статус запроса
                  error:
                    type: object
                    properties:
                      code:
                        type: string
                        description: Кодовое сообщение
                      details:
                        type: string
                        description: Описание ошибки
                    required:
                      - code
                      - details
                    x-apidog-orders:
                      - code
                      - details
                    description: Ошибка
                    x-apidog-ignore-properties: []
                required:
                  - success
                  - error
                x-apidog-orders:
                  - success
                  - error
                x-apidog-ignore-properties: []
          headers: {}
          x-apidog-name: Истёк код пароля
        x-400:Ошибочная валидация:
          description: >-
            При отправке запроса с допущением ошибки валидации, возвращается
            ошибка с кодом 400
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    description: Статус запроса
                  error:
                    type: object
                    properties:
                      code:
                        type: string
                        description: Кодовое сообщение
                      details:
                        type: string
                        description: Описание ошибки
                    required:
                      - code
                      - details
                    x-apidog-orders:
                      - code
                      - details
                    description: Ошибка
                    x-apidog-ignore-properties: []
                required:
                  - success
                  - error
                x-apidog-orders:
                  - success
                  - error
                x-apidog-ignore-properties: []
          headers: {}
          x-apidog-name: Ошибочная валидация
      security: []
      x-apidog-folder: Привязка карт (API)
      x-apidog-status: released
      x-run-in-apidog: https://app.apidog.com/web/project/1022226/apis/api-19729309-run
components:
  schemas:
    PaymentStatusEnum:
      type: string
      enum:
        - draft
        - progress
        - billing
        - success
        - error
        - revert
      x-apidog-enum:
        - value: draft
          name: ''
          description: транзакция не подтверждена
        - value: progress
          name: ''
          description: транзакция в процессе списания в платежной системе
        - value: billing
          name: ''
          description: идет отправка запроса в биллинг поставщика
        - value: success
          name: ''
          description: успешно
        - value: error
          name: ''
          description: >-
            ошибка при списании или отправки запроса в биллинг поставщика.
            транзакция не успешна
        - value: revert
          name: ''
          description: возврат
      x-apidog-folder: ''
  securitySchemes:
    bearer:
      type: http
      scheme: bearer
servers: []
security:
  - bearer: []

```
