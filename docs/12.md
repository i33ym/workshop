# Callback-запрос

## OpenAPI Specification

```yaml
openapi: 3.0.1
info:
  title: ''
  description: ''
  version: 1.0.0
paths:
  /:
    post:
      summary: Callback-запрос
      deprecated: false
      description: >-
        Данный запрос отправляется со стороны системы Multicard в систему
        Партнера.


        При успешном добавлении карты пользователем, на переданный в поле
        callback_url адрес, приходит следующий запрос.


        В поле card_token указан токен карты для проведения платежных
        транзакций.


        В случае, если на callback-запрос система Партнера ответила
        http-статусом, отличным от 200, то запрос отправляется через 60 секунд
        (всего 5 попыток).
      tags:
        - Привязка карт (форма)
      parameters: []
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                id:
                  type: integer
                application_id:
                  type: integer
                  description: Идентификатор приложения, выданный со стороны Multicard
                payer_id:
                  type: string
                  description: |+
                    Значение поля session_id из ответа на запрос привязки карты

                card_pan:
                  type: string
                  description: |-
                    Max length:16
                    Маскированный номер карты
                card_token:
                  type: string
                  description: |-
                    Max length:255
                    Токен карты для проведения платежных операций с карто
                phone:
                  type: string
                  description: >-
                    Max length:12

                    Телефон держателя карты в формате 998XXXXXXXXX
                    (поддерживается только для карт Uzcard и Humo)
                holder_name:
                  type: string
                  description: |-
                    Max length:100
                    Имя держателя карт
                pinfl:
                  type: 'null'
                  description: >-
                    Default:

                    ПИНФЛ держателя карты (возвращается в случае передачи в
                    запросе на создание привязки для карт Uzcard и Humo)

                    Max length:14
                ps:
                  type: string
                  description: |-
                    Allowed values (5)
                    uzcard,humo,visa,mastercard,unionpay hide all
                    Платежная система
                status:
                  type: string
                  description: >-
                    Allowed values (3)

                    active,

                    draft,

                    deleted
                     
                    hide all

                    Статус привязки. active - карта успешно привязана, можно
                    проводить платежные операции по токену карты
                added_on:
                  type: string
                  description: |+
                    Время добавления карты в формате YYYY-mm-dd H:i:s

                card_status:
                  type: 'null'
                sms_inform:
                  type: 'null'
                is_multicard:
                  type: boolean
              required:
                - id
                - application_id
                - payer_id
                - card_pan
                - card_token
                - phone
                - holder_name
                - pinfl
                - ps
                - status
                - added_on
                - card_status
                - sms_inform
                - is_multicard
              x-apidog-orders:
                - id
                - application_id
                - payer_id
                - card_pan
                - card_token
                - phone
                - holder_name
                - pinfl
                - ps
                - status
                - added_on
                - card_status
                - sms_inform
                - is_multicard
            example:
              id: 3554547
              application_id: 9
              payer_id: 688470c8060af
              card_pan: 986027******1519
              card_token: 6225f3c93f7a880142782fa4
              phone: '99891234567'
              holder_name: AAAAA BBBBB
              pinfl: null
              ps: humo
              status: active
              added_on: '2025-03-17 03:19:12'
              card_status: null
              sms_inform: null
              is_multicard: false
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                type: object
                properties: {}
                x-apidog-orders: []
          headers: {}
          x-apidog-name: Success
      security: []
      x-apidog-folder: Привязка карт (форма)
      x-apidog-status: released
      x-run-in-apidog: https://app.apidog.com/web/project/1022226/apis/api-19729303-run
components:
  schemas: {}
  securitySchemes:
    bearer:
      type: http
      scheme: bearer
servers: []
security:
  - bearer: []

```
