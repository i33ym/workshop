# История проведенных выплат на карты (пополнений)

## OpenAPI Specification

```yaml
openapi: 3.0.1
info:
  title: ''
  description: ''
  version: 1.0.0
paths:
  /payment/store/{store_id}/credit-history:
    get:
      summary: История проведенных выплат на карты (пополнений)
      deprecated: false
      description: ''
      tags:
        - Дополнительные методы
      parameters:
        - name: store_id
          in: path
          description: ''
          required: true
          example: '6'
          schema:
            type: string
        - name: offset
          in: query
          description: Отступ записей в ответе
          required: true
          example: 0
          schema:
            type: integer
        - name: limit
          in: query
          description: Кол-во записей в ответе
          required: true
          example: 10
          schema:
            type: integer
        - name: only_status
          in: query
          description: фильтрация транзакций с конкретным статусом
          required: true
          example: success
          schema:
            type: string
        - name: start_date
          in: query
          description: Время в формате YYYY-mm-dd H:i:s. Временная зона GMT+5
          required: true
          example: '2025-03-01 00:00:00'
          schema:
            type: string
        - name: end_date
          in: query
          description: Время в формате YYYY-mm-dd H:i:s. Временная зона GMT+5
          required: true
          example: '2025-03-02 00:00:00'
          schema:
            type: string
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      pagination:
                        type: object
                        properties:
                          total:
                            type: integer
                          offset:
                            type: integer
                          limit:
                            type: integer
                        x-apidog-orders:
                          - total
                          - offset
                          - limit
                        required:
                          - total
                          - offset
                          - limit
                        x-apidog-ignore-properties: []
                      stat:
                        type: array
                        items:
                          type: object
                          properties:
                            status: &ref_0
                              description: Статус
                              $ref: '#/components/schemas/PaymentStatusEnum'
                            ps: &ref_1
                              description: Платежный метод (система или сервис)
                              $ref: '#/components/schemas/PaymentServiceEnum'
                            payment_amount:
                              type: integer
                              description: >-
                                сумма платежей по заданному платежному методу в
                                указанном статусе в тийинах
                              nullable: true
                          x-apidog-orders:
                            - status
                            - ps
                            - payment_amount
                          required:
                            - status
                            - ps
                            - payment_amount
                          x-apidog-ignore-properties: []
                        description: Агрегированная информация по транзакциям
                      list:
                        type: array
                        items:
                          type: object
                          properties:
                            id:
                              type: integer
                            uuid:
                              type: string
                              format: uuid
                            status: *ref_0
                            ps: *ref_1
                            store_invoice_id:
                              type: string
                            billing_id:
                              type: string
                            payment_time:
                              type: string
                            payment_amount:
                              type: integer
                            commission_amount:
                              type: integer
                            card_token:
                              type: string
                            card_pan:
                              type: string
                            ps_uniq_id:
                              type: string
                            added_on:
                              type: string
                              format: date-time
                          x-apidog-orders:
                            - id
                            - uuid
                            - status
                            - ps
                            - store_invoice_id
                            - billing_id
                            - payment_time
                            - payment_amount
                            - commission_amount
                            - card_token
                            - card_pan
                            - ps_uniq_id
                            - added_on
                          required:
                            - id
                            - uuid
                            - status
                            - ps
                            - store_invoice_id
                            - payment_amount
                            - commission_amount
                            - card_token
                            - added_on
                          x-apidog-ignore-properties: []
                        description: Список транзакций
                    x-apidog-orders:
                      - pagination
                      - stat
                      - list
                    required:
                      - pagination
                      - stat
                      - list
                    x-apidog-ignore-properties: []
                x-apidog-orders:
                  - success
                  - data
                required:
                  - success
                  - data
                x-apidog-ignore-properties: []
              example:
                success: true
                data:
                  pagination:
                    total: 9
                    offset: 0
                    limit: 10
                  stat:
                    - status: draft
                      ps: uzcard
                      payment_amount: '300000'
                    - status: success
                      ps: uzcard
                      payment_amount: '50000'
                    - status: error
                      ps: uzcard
                      payment_amount: '100000'
                  list:
                    - id: 25788622
                      uuid: fc207b3d-79b8-11ef-bfaa-00505680eaf6
                      status: draft
                      ps: uzcard
                      store_invoice_id: '909903929'
                      billing_id: null
                      payment_time: null
                      payment_amount: 50000
                      commission_amount: 1250
                      total_amount: 50000
                      card_token: 65b81d37b53977001c14391a
                      card_pan: 860006******2278
                      added_on: '2024-09-23 19:34:48'
          headers: {}
          x-apidog-name: Success
      security: []
      x-apidog-folder: Дополнительные методы
      x-apidog-status: released
      x-run-in-apidog: https://app.apidog.com/web/project/1022226/apis/api-19729329-run
components:
  schemas:
    PaymentServiceEnum:
      type: string
      enum:
        - uzcard
        - humo
        - visa
        - mastercard
        - account
        - payme
        - click
        - uzum
        - anorbank
        - oson
        - alif
        - xazna
        - beepul
        - trastpay
        - sbp
      x-apidog-enum:
        - value: uzcard
          name: ''
          description: ''
        - value: humo
          name: ''
          description: ''
        - value: visa
          name: ''
          description: ''
        - value: mastercard
          name: ''
          description: ''
        - value: account
          name: ''
          description: ''
        - value: payme
          name: ''
          description: ''
        - value: click
          name: ''
          description: ''
        - value: uzum
          name: ''
          description: ''
        - value: anorbank
          name: ''
          description: ''
        - value: oson
          name: ''
          description: ''
        - value: alif
          name: ''
          description: ''
        - value: xazna
          name: ''
          description: ''
        - value: beepul
          name: ''
          description: ''
        - value: trastpay
          name: ''
          description: ''
        - value: sbp
          name: ''
          description: ''
      description: Платежная система или сервис
      x-apidog-folder: ''
    PaymentStatusEnum:
      type: string
      enum:
        - draft
        - progress
        - billing
        - success
        - error
        - revert
      x-apidog-enum:
        - value: draft
          name: ''
          description: транзакция не подтверждена
        - value: progress
          name: ''
          description: транзакция в процессе списания в платежной системе
        - value: billing
          name: ''
          description: идет отправка запроса в биллинг поставщика
        - value: success
          name: ''
          description: успешно
        - value: error
          name: ''
          description: >-
            ошибка при списании или отправки запроса в биллинг поставщика.
            транзакция не успешна
        - value: revert
          name: ''
          description: возврат
      x-apidog-folder: ''
  securitySchemes:
    bearer:
      type: http
      scheme: bearer
servers: []
security:
  - bearer: []

```
