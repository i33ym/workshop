# Получение ссылки на страницу привязки карты

## OpenAPI Specification

```yaml
openapi: 3.0.1
info:
  title: ''
  description: ''
  version: 1.0.0
paths:
  /payment/card/bind:
    post:
      summary: Получение ссылки на страницу привязки карты
      deprecated: false
      description: >-
        Метод для создания сессии по привязке карты. Срок активности сессии – 15
        минут.


        Необходимо перенаправить пользователя по URL (открыть WebView),
        указанному в поле data.form_url.


        Для получения результата можно передать callback_url, тогда будет
        отправлен callback-запрос, либо проверять состояние с помощью метода
        проверки привязанной карты.
      tags:
        - Привязка карт (форма)
      parameters: []
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                redirect_url:
                  type: string
                  description: >
                    URL для перенаправления после успешного добавления карты
                    пользователем
                redirect_decline_url:
                  type: string
                  description: >+
                    URL для перенаправления при неуспешном добавлении карты или
                    отмены пользователем

                store_id:
                  type: integer
                  description: |+
                    ID кассы, выданный со стороны Multicard

                callback_url:
                  type: string
                  description: >+
                    Если передан, то по заданному URL будет отправлен
                    callback-запрос (webhook) при успешном добавлении карты.
                    Формат запроса приведен ниже

                pinfl:
                  type: string
                  description: >-
                    ПИНФЛ клиента. Если передан, то будет осуществлена проверка
                    на принадлежность карты к данному лицу (только для
                    Uzcard/Humo)
                  minLength: 14
                  maxLength: 14
                phone:
                  type: string
                  description: >-
                    Номер телефона пользователя в формате 998XXXXXXXXX.
                    Обязателен для карт Humo. Если передан, то будет проверено
                    соответствие с номер смс-информаирования на карте (для
                    Uzcard/Humo)
              required:
                - redirect_url
                - redirect_decline_url
                - store_id
                - callback_url
                - phone
              x-apidog-orders:
                - redirect_url
                - redirect_decline_url
                - store_id
                - callback_url
                - phone
                - pinfl
              description: |+

            example:
              redirect_url: https://site.uz/success.html
              redirect_decline_url: https://site.uz/decline.html
              store_id: 6
              callback_url: https://site.uz/card-callback
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      session_id:
                        type: string
                        description: >+
                          Необходимо сохранить данное значение, оно возвращается
                          в callback-запросе в поле payer_id. Также можно
                          проверить состояние через метод проверки привязанной
                          карты

                      form_url:
                        type: string
                        description: >+
                          URL формы добавления карты (необходимо перенаправить
                          пользователя, либо открыть webView)

                    required:
                      - session_id
                      - form_url
                    x-apidog-orders:
                      - session_id
                      - form_url
                required:
                  - success
                  - data
                x-apidog-orders:
                  - success
                  - data
              example:
                success: true
                data:
                  session_id: 67f8dd24e9800
                  form_url: https://dev-checkout.multicard.uz/card/67f8dd24e9800
          headers: {}
          x-apidog-name: Привязка карты
        '400':
          description: >-
            При отправке запроса с допущением ошибки валидации, возвращается
            ошибка с кодом 400
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    description: Статус запроса
                  error:
                    type: object
                    properties:
                      code:
                        type: string
                        description: Кодовое сообщение
                      details:
                        type: string
                        description: Описание ошибки
                    required:
                      - code
                      - details
                    x-apidog-orders:
                      - code
                      - details
                    description: Ошибка
                required:
                  - success
                  - error
                x-apidog-orders:
                  - success
                  - error
              example:
                success: false
                error:
                  code: ERROR_FIELDS
                  details: 'Не переданы обязательные поля: store_id'
          headers: {}
          x-apidog-name: Ошибочная валидация
      security: []
      x-apidog-folder: Привязка карт (форма)
      x-apidog-status: released
      x-run-in-apidog: https://app.apidog.com/web/project/1022226/apis/api-19729302-run
components:
  schemas: {}
  securitySchemes:
    bearer:
      type: http
      scheme: bearer
servers: []
security:
  - bearer: []

```
