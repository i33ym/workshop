# Реестр проведенных платежей

## OpenAPI Specification

```yaml
openapi: 3.0.1
info:
  title: ''
  description: ''
  version: 1.0.0
paths:
  /payment/store/{store_id}/history:
    get:
      summary: Реестр проведенных платежей
      deprecated: false
      description: ''
      tags:
        - Дополнительные методы
      parameters:
        - name: store_id
          in: path
          description: ''
          required: true
          example: '6'
          schema:
            type: string
        - name: offset
          in: query
          description: Отступ записей в ответе
          required: true
          example: 0
          schema:
            type: integer
        - name: limit
          in: query
          description: Кол-во записей в ответе
          required: true
          example: 100
          schema:
            type: integer
        - name: only_status
          in: query
          description: фильтрация транзакций с конкретным статусом
          required: false
          example: success
          schema:
            type: string
            enum:
              - success
              - error
              - revert
              - progress
              - billing
              - draft
            x-apidog-enum:
              - value: success
                name: ''
                description: ''
              - value: error
                name: ''
                description: ''
              - value: revert
                name: ''
                description: ''
              - value: progress
                name: ''
                description: ''
              - value: billing
                name: ''
                description: ''
              - value: draft
                name: ''
                description: ''
        - name: start_date
          in: query
          description: Время в формате YYYY-mm-dd H:i:s. Временная зона GMT+5
          required: true
          example: '2025-03-01 00:00:00'
          schema:
            type: string
        - name: end_date
          in: query
          description: Время в формате YYYY-mm-dd H:i:s. Временная зона GMT+5
          required: true
          example: '2025-03-02 00:00:00'
          schema:
            type: string
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      pagination:
                        type: object
                        properties:
                          total:
                            type: integer
                          offset:
                            type: integer
                          limit:
                            type: integer
                        x-apidog-orders:
                          - total
                          - offset
                          - limit
                        required:
                          - total
                          - offset
                          - limit
                        x-apidog-ignore-properties: []
                      stat:
                        type: array
                        items:
                          type: object
                          properties:
                            status: &ref_0
                              description: Статус
                              $ref: '#/components/schemas/PaymentStatusEnum'
                            ps: &ref_1
                              description: Платежный метод (система или сервис)
                              $ref: '#/components/schemas/PaymentServiceEnum'
                            payment_amount:
                              type: integer
                              description: >-
                                сумма платежей по заданному платежному методу в
                                указанном статусе в тийинах
                              nullable: true
                          x-apidog-orders:
                            - status
                            - ps
                            - payment_amount
                          required:
                            - status
                            - ps
                            - payment_amount
                          x-apidog-ignore-properties: []
                        description: Агрегированная информация по транзакциям
                      list:
                        type: array
                        items:
                          type: object
                          properties:
                            id:
                              type: integer
                            uuid:
                              type: string
                              format: uuid
                            status: *ref_0
                            ps: *ref_1
                            store_invoice_id:
                              type: string
                            billing_id:
                              type: string
                            payment_time:
                              type: string
                            payment_amount:
                              type: integer
                            commission_amount:
                              type: integer
                            card_token:
                              type: string
                            card_pan:
                              type: string
                            ps_uniq_id:
                              type: string
                            refund_time:
                              type: string
                              format: date-time
                            added_on:
                              type: string
                              format: date-time
                          x-apidog-orders:
                            - id
                            - uuid
                            - status
                            - ps
                            - store_invoice_id
                            - billing_id
                            - payment_time
                            - payment_amount
                            - commission_amount
                            - card_token
                            - card_pan
                            - ps_uniq_id
                            - refund_time
                            - added_on
                          required:
                            - id
                            - uuid
                            - status
                            - ps
                            - store_invoice_id
                            - payment_amount
                            - commission_amount
                            - card_token
                            - added_on
                          x-apidog-ignore-properties: []
                        description: Список транзакций
                    x-apidog-orders:
                      - pagination
                      - stat
                      - list
                    required:
                      - pagination
                      - stat
                      - list
                    x-apidog-ignore-properties: []
                x-apidog-orders:
                  - success
                  - data
                required:
                  - success
                  - data
                x-apidog-ignore-properties: []
          headers: {}
          x-apidog-name: Success
        '400':
          description: ''
          content:
            application/json:
              schema:
                title: ''
                type: object
                properties:
                  success:
                    type: boolean
                  error:
                    type: object
                    properties:
                      code:
                        type: string
                      details:
                        type: string
                    x-apidog-orders:
                      - code
                      - details
                    required:
                      - code
                      - details
                    x-apidog-ignore-properties: []
                x-apidog-orders:
                  - success
                  - error
                required:
                  - success
                  - error
                x-apidog-ignore-properties: []
              example:
                success: false
                error:
                  code: ERROR_FIELDS
                  details: Поле store_id является обязательным
          headers: {}
          x-apidog-name: Validation Error
        '403':
          description: ''
          content:
            application/json:
              schema:
                title: ''
                type: object
                properties:
                  success:
                    type: boolean
                  error:
                    type: object
                    properties:
                      code:
                        type: string
                      details:
                        type: string
                    x-apidog-orders:
                      - code
                      - details
                    required:
                      - code
                      - details
                    x-apidog-ignore-properties: []
                x-apidog-orders:
                  - success
                  - error
                required:
                  - success
                  - error
                x-apidog-ignore-properties: []
              example:
                success: false
                error:
                  code: ERROR_ACCESS_DENIED
                  details: Доступ запрещен
          headers: {}
          x-apidog-name: Access Denied Error
      security: []
      x-apidog-folder: Дополнительные методы
      x-apidog-status: released
      x-run-in-apidog: https://app.apidog.com/web/project/1022226/apis/api-19729328-run
components:
  schemas:
    PaymentServiceEnum:
      type: string
      enum:
        - uzcard
        - humo
        - visa
        - mastercard
        - account
        - payme
        - click
        - uzum
        - anorbank
        - oson
        - alif
        - xazna
        - beepul
        - trastpay
        - sbp
      x-apidog-enum:
        - value: uzcard
          name: ''
          description: ''
        - value: humo
          name: ''
          description: ''
        - value: visa
          name: ''
          description: ''
        - value: mastercard
          name: ''
          description: ''
        - value: account
          name: ''
          description: ''
        - value: payme
          name: ''
          description: ''
        - value: click
          name: ''
          description: ''
        - value: uzum
          name: ''
          description: ''
        - value: anorbank
          name: ''
          description: ''
        - value: oson
          name: ''
          description: ''
        - value: alif
          name: ''
          description: ''
        - value: xazna
          name: ''
          description: ''
        - value: beepul
          name: ''
          description: ''
        - value: trastpay
          name: ''
          description: ''
        - value: sbp
          name: ''
          description: ''
      description: Платежная система или сервис
      x-apidog-folder: ''
    PaymentStatusEnum:
      type: string
      enum:
        - draft
        - progress
        - billing
        - success
        - error
        - revert
      x-apidog-enum:
        - value: draft
          name: ''
          description: транзакция не подтверждена
        - value: progress
          name: ''
          description: транзакция в процессе списания в платежной системе
        - value: billing
          name: ''
          description: идет отправка запроса в биллинг поставщика
        - value: success
          name: ''
          description: успешно
        - value: error
          name: ''
          description: >-
            ошибка при списании или отправки запроса в биллинг поставщика.
            транзакция не успешна
        - value: revert
          name: ''
          description: возврат
      x-apidog-folder: ''
  securitySchemes:
    bearer:
      type: http
      scheme: bearer
servers: []
security:
  - bearer: []

```
